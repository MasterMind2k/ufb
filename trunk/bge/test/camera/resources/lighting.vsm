out vec4 diffuse, ambient;
out vec3 normal, lightDir, halfVector;

in vec3 in_Vertex;
in vec3 in_Normal;

uniform mat4 ModelViewMatrix;
uniform mat3 NormalMatrix;

struct LightStruct {
  vec4 position;
  /* Colors */
  vec4 ambient;
  vec4 diffuse;
  vec4 specular;
  /* Attenuations */
  float constant;
  float linear;
  float quadratic;
  /* Spot properties */
  float spot_cutoff;
  float spot_exponent;
  vec3 spot_direction;
};

struct MaterialStruct {
  vec4 ambient;
  vec4 diffuse;
  vec4 specular;
  int shininess;
};

uniform LightStruct Lights0;
uniform MaterialStruct Material;

void calculateLighting()
{
  normal = normalize(NormalMatrix * in_Normal);

  lightDir = normalize(vec3(Lights0.position));

  vec3 eye = vec3(0, 0, 1);
  vec4 ecPos = ModelViewMatrix * vec4(in_Vertex, 1.0);
  halfVector = normalize(eye + lightDir);

  diffuse = Material.diffuse * Lights0.diffuse;
  ambient = Material.ambient * Lights0.ambient;
  /* Hardcode global ambient */
  ambient += vec4(0.2, 0.2, 0.2, 1.0) * Material.ambient;
}
